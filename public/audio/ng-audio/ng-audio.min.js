/** 
* @license ng-audio - v0.0.1
* (c) 2013 Julien VALERY https://github.com/darul75/ng-slider
* License: MIT 
**/
!function(a){"use strict";function b(a,b,c){this.context=a,this.urlList=b,this.onload=c,this.bufferList=new Array,this.loadCount=0}a.module("ngAudio",[]).directive("audio",["$timeout",function(c){return{restrict:"AE",scope:{ngModel:"=",options:"="},template:'<div ng-click="play(0)" class="play_border" ng-show="loaded && !running"><div class="play_button"></div></div><div ng-click="stop(0)" class="play_border" ng-show="loaded && running"><div class="pause_button"></div></div>',link:function(d){var e={loop:!1};a.extend(e,d.options),d.play=function(a){d.running||(d.source=d.context.createBufferSource(),d.source.buffer=d.bufferList[a],d.source.connect(d.context.destination),d.source.loop=e.loop,d.source.start||(d.source.start=source.noteOn),d.source.start(0),d.running=!0)},d.stop=function(){d.running&&(d.source.stop||(d.source.stop=d.source.noteOff),d.source.stop(0),d.running=!1)},d.load=function(a){d.bufferLoader=new b(d.context,a,d.finishedLoading),d.bufferLoader.load()},d.finishedLoading=function(a,b){return a&&console?void console.error(a):(d.bufferList=b,void c(function(){d.loaded=!0}))},d.init=function(){try{var a=window.AudioContext||window.webkitAudioContext;d.context=new a,d.load(d.options.playlist)}catch(b){console&&console.log("Web Audio API is not supported in this browser")}},d.init()}}}]),b.prototype.loadBuffer=function(a,b){var c=new XMLHttpRequest;"withCredentials"in c?c.open("GET",a,!0):"undefined"!=typeof XDomainRequest&&(c=new XDomainRequest,c.open(method,a)),c.open("GET",a,!0),c.responseType="arraybuffer";var d=this;c.onload=function(){d.context.decodeAudioData(c.response,function(c){return c?(d.bufferList[b]=c,void(++d.loadCount==d.urlList.length&&d.onload(null,d.bufferList))):void this.onload("error decoding file data: "+a)},function(a){this.onload("decodeAudioData error"+a)})},c.onerror=function(){this.onload("BufferLoader: XHR error")},c.send()},b.prototype.load=function(){for(var a=0;a<this.urlList.length;++a)this.loadBuffer(this.urlList[a],a)}}(angular);